# Простой программируемый вычислитель на SystemC

Проект представляет собой реализацию простого программируемого вычислителя на SystemC с различными архитектурными решениями.

## Реализации

### 1. Простой калькулятор (simple_calculator)
Базовая реализация с последовательным выполнением инструкций:
- Поддерживает операции LOAD, ADD, STORE, HALT
- 4 регистра общего назначения
- Память 4KB
- Простое последовательное выполнение инструкций

### 2. Простой калькулятор (simple_calculator_nb)
Базовая реализация с последовательным выполнением инструкций:
- Поддерживает операции LOAD, ADD, STORE, HALT
- Неблокирующий доступ к памяти (nb_transport)
- 4 регистра общего назначения
- Память 4KB
- Простое последовательное выполнение инструкций

### 3. Конвейерный калькулятор (simple_calculator_pipeline)
Улучшенная версия с конвейерной архитектурой:
- 4-стадийный конвейер (Decode, Read, Execute, Writeback)
- Неблокирующий доступ к памяти (nb_transport)
- Проверки границ памяти и регистров
- Отладочная информация о выполнении инструкций

## Общие характеристики

### Поддерживаемые инструкции
1. **LOAD** - загрузка данных из памяти в регистр
   - Формат: `LOAD Rd, addr`
   - Пример: `LOAD R0, 0x100`

2. **ADD** - сложение значений регистров
   - Формат: `ADD Rd, Rs1, Rs2`
   - Пример: `ADD R2, R0, R1`

3. **STORE** - сохранение значения регистра в память
   - Формат: `STORE Rs, addr`
   - Пример: `STORE R2, 0x108`

4. **HALT** - остановка выполнения программы

### Формат инструкции
```cpp
struct Instruction {
    uint8_t type;     // Тип инструкции
    uint8_t reg1;     // Первый регистр
    uint8_t reg2;     // Второй регистр
    uint8_t reg3;     // Третий регистр
    uint32_t address; // Адрес памяти
};
```

## Требования
- SystemC 3.0.1 или выше
- C++ компилятор с поддержкой C++11
- Make

## Сборка и запуск
```bash
# Сборка
make

# Запуск (выберите нужную версию)
./bin/simple_calculator
./bin/simple_calculator_nb
./bin/simple_calculator_pipeline
```

## Тестовая программа
```cpp
// Загрузка первого числа
LOAD R0, 0x100  // R0 = mem[0x100] = 10

// Загрузка второго числа
LOAD R1, 0x104  // R1 = mem[0x104] = 20

// Сложение чисел
ADD R2, R0, R1  // R2 = R0 + R1 = 30

// Сохранение результата
STORE R2, 0x108 // mem[0x108] = R2 = 30

// Остановка
HALT
```

## Обработка ошибок
Все версии реализуют базовые проверки:
- Выход за границы памяти
- Недопустимые значения регистров
- Ошибки при работе с памятью
- Неизвестные инструкции

## Структура проекта
```
calculator_systemc/
├── include/           # Заголовочные файлы
├── src/              # Исходные файлы
├── bin/              # Скомпилированные исполняемые файлы
├── obj/              # Объектные файлы
└── Makefile          # Файл сборки
```
